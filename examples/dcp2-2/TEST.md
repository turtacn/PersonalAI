### **价值点需求设计全流程模拟**

#### **核心价值点**

**通过高性能数据供给，最大化AI算力（特别是昂贵的GPU）利用率，直接降低模型训练的总拥有成本（TCO）和缩短研发周期（Time to Market）。**

-----

#### **环节1：系统级主特性（SF）拆解（初始粗拆版）**

基于核心价值点，我们首先进行第一轮粗略的特性拆解，区分用户直接感知到的特性和支撑价值实现的技术特性。

| 特性ID | 特性名称 | 特性分类 | 描述 |
| :--- | :--- | :--- | :--- |
| **SF-1** | **高性能AI训练数据访问** | 主流场景特性 | 为AI训练框架提供高性能、高并发的数据读取能力。 |
| **SF-2** | **AI基础设施亲和性** | 技术特性 (DFX) | 与主流AI计算框架和硬件（GPU）深度集成，降低延迟。 |

  * **当前识别的待深入设计项**：
      * `SF-1`的具体性能指标是什么？如何应对不同类型的AI数据（大文件、小文件）？
      * `SF-2`的“深度集成”具体指什么技术？如何让用户感知到这种亲和性？

-----

#### **环节2：用户场景分析建模与设计策略创新**

老师您好，为了让我们设计的存储产品真正解决您的问题，我们不能只谈“高性能”这个技术概念，而是要深入到您最核心、最高价值的工作场景中去。我们选择了一个当前最具挑战性的场景进行建模：**“千亿级多模态大模型预训练”**。

**1. 场景建模（结构性画面）**

  * **用户角色**:
      * **AI科学家 (AI Scientist)**: 关注模型效果和迭代速度。
      * **AI平台工程师 (AI Platform Engineer)**: 关注集群稳定性和资源利用率。
  * **当前痛点 (Problem)**:
    1.  **数据类型混杂**: 数据集包含数亿张图片（大文件）和PB级的文本数据（海量小文件），现有存储系统无法同时高效处理这两种I/O模式，导致数据加载成为瓶颈。
    2.  **GPU空等**: 价值数百万美元的GPU集群，在数据加载阶段的平均利用率可能低于60%，大量“核时”被白白浪费。
    3.  **实验不可复现**: PB级的数据集难以管理版本，导致两次实验使用的数据集可能存在微小差异，影响模型效果的可复现性。
  * **理想的最佳实践 (Ideal Best Practice)**:
    1.  **智能感知数据**: 存储系统应能智能识别训练作业的数据特征（大/小文件混合），自动优化数据在后端硬盘（SSD/HDD）上的布局和预取策略。
    2.  **I/O路径最短化**: 数据能够从存储直接“注入”GPU显存，彻底消除CPU和系统内存的瓶颈。
    3.  **数据与代码强关联**: 数据集可以像代码一样进行版本管理，每次训练都能精确关联到所使用的数据快照。
  * **设计策略创新**: 我们的核心设计策略是\*\*“从应用感知的智能数据服务，到硬件亲和的极致性能加速”\*\*。我们不做一个通用的存储，而是为AI训练场景“特制”一个既懂上层应用、又懂底层硬件的数据引擎。

**2. 识别并输入新特性（渐进明细）**

通过上述场景建模，我们识别出了一系列新的、更具体的子特性，并将其输入到特性表中：

  * 针对“智能感知数据”，我们拆解出：
      * **SF-1.1**: **面向海量小文件的高IOPS元数据加速**
      * **SF-1.2**: **面向大文件的超高聚合带宽**
      * **SF-1.3**: **（新识别）混合负载智能数据布局与预取** (体验特性)
  * 针对“I/O路径最短化”，我们明确了技术路径：
      * **SF-2.1**: **原生支持GPUDirect Storage技术**
  * 针对“数据与代码强关联”，我们引入了数据管理能力：
      * **SF-3 (新主特性)**: **AI数据资产管理**
      * **SF-3.1**: **（新识别）统一命名空间下的数据版本快照** (重要场景特性)

-----

#### **环节3：价值点相关的主旅程Playbook**

老师您好，理解了最佳实践后，让我们来看一下AI科学家和平台工程师如何通过一个具体的\*\*“主旅程Playbook”\*\*来真正兑现价值。这个Playbook定义了从准备数据到成功发起一个高效训练任务的端到端流程，是我们可以拿到用户现场进行POC验证的剧本。

**Playbook名称：AI科学家“分钟级”启动PB级多模态训练任务**

  * **目标**: 将以往需要数天甚至一周的数据准备和环境调试时间，缩短到分钟级，并确保训练启动后GPU利用率即刻达到90%以上。
  * **涉及角色**: 数据工程师、AI科学家、AI平台工程师。
  * **主旅程步骤**:
    1.  **【数据工程师】数据一键入湖**: 数据工程师通过一个简单的UI界面或命令行，将PB级的原始图文数据（无论在公有云还是本地）高速“注入”到我们的分布式存储中。系统在后台**自动进行数据格式化和索引构建**。
    2.  **【数据工程师】创建数据快照**: 数据工程师对清洗好的数据集创建一个**不可变的、秒级创建的版本快照**（如 `dataset_v1.0`），并赋予AI科学家读取权限。
    3.  **【AI科学家】代码中引用数据**: AI科学家在自己的PyTorch训练代码中，**无需关心数据物理位置**，只需像访问本地文件一样，直接引用逻辑路径，如 `/datasets/multimodal/dataset_v1.0`。
    4.  **【AI科学家】提交训练作业**: AI科学家通过Jupyter Notebook或命令行提交训练作业到Kubernetes集群。
    5.  **【平台工程师/AI科学家】实时性能洞察**: 在训练启动后，平台工程师或AI科学家可以在**统一的监控大盘**上，实时看到本次作业的I/O吞吐、IOPS、延迟，以及**GPU利用率和I/O等待时间占比**的关联图表。如果GPU利用率低，系统会**自动诊断并提示瓶颈在于数据侧还是计算侧**。

**识别并输入新特性（渐进明细）**

这个旅程的设计，让我们发现了更多提升体验和效率的关键特性：

  * 针对步骤1，我们识别出：
      * **SF-4 (新主特性)**: **数据敏捷化与自动化**
      * **SF-4.1**: **（新识别）多源数据一键引入与自动格式化** (体验特性)
  * 针对步骤5，这是兑现价值的关键闭环，我们识别出：
      * **SF-2.2**: **（新识别）训练作业I/O性能瓶颈可视化诊断** (体验特性)
      * **SF-2.3**: **（新识别）基于GPU I/O等待的智能告警** (体验特性)

-----

#### **环节4：该价值点对应的用户需求说明书关键描述**

现在，我们选择旅程中发现的、对用户价值感知最强的 `SF-2.2` 特性，进行具体的需求描述和UI设计。

**1. 需求描述 (Feature: I/O Performance Insight Dashboard)**

  * **用户故事**:
      * **As an** AI Platform Engineer,
      * **I want to** view a dashboard that correlates a specific training job's GPU utilization with its real-time storage I/O metrics (throughput, IOPS, latency),
      * **So that** I can immediately identify whether a performance issue is caused by a storage bottleneck or an application/model problem, and thus quickly optimize resource allocation.
  * **受理标准 (Acceptance Criteria)**:
    1.  用户可以在监控界面选择一个正在运行的训练作业（通过Job Name或Pod Name）。
    2.  界面必须展示该作业关联的以下几条关键曲线：
          * GPU平均利用率 (%)
          * GPU平均I/O等待时间占比 (%)
          * 存储客户端总读取带宽 (GB/s)
          * 存储客户端总读取IOPS
    3.  这几条曲线的时间轴必须对齐，支持缩放和平移。
    4.  当“GPU I/O等待时间占比”超过预设阈值（如20%）时，该曲线应高亮显示为红色，并触发告警事件。
    5.  界面应提供一个“智能诊断”按钮，点击后能给出初步的文字判断，如：“诊断：GPU利用率低下，主要瓶颈为存储IOPS不足，建议优化数据读取模式或增加存储节点。”

**2. UI草稿描述**

```
+-------------------------------------------------------------------------+
| [AI训练作业性能洞察]                                                    |
|                                                                         |
|  选择作业: [K8s-Job-ID-12345 (Train-ResNet50) ▼]  时间范围: [过去1小时 ▼] |
+-------------------------------------------------------------------------+
|                                                                         |
|  [GPU利用率 (%)] & [GPU I/O等待 (%)] - (双Y轴折线图)                     |
|  ^ 100%                                                                 |
|  |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ (利用率) 92%     |
|  |                                                                     |
|  |         /****\ (I/O等待) 8%                                          |
|  +-------------------------------------------------------------------> t  |
|                                                                         |
+-------------------------------------------------------------------------+
|                                                                         |
|  [存储吞吐 (GB/s)] & [存储IOPS (k)] - (双Y轴折线图)                      |
|  ^ 200GB/s                                                              |
|  |~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ (吞吐) 180GB/s    |
|  |                                                                     |
|  |         /^^^^^^^\ (IOPS) 800k                                       |
|  +-------------------------------------------------------------------> t  |
|                                                                         |
+-------------------------------------------------------------------------+
| [智能诊断] (按钮)  [告警历史] (链接)                                     |
|                                                                         |
|  诊断结果: [状态正常。GPU利用率维持在90%以上，存储性能匹配当前算力需求。]  |
+-------------------------------------------------------------------------+
```

这个UI设计直接将算力指标和存储指标关联，让瓶颈一目了然，完美闭环了我们“最大化算力利用率”的价值承诺。

-----

### **三大产出物**

#### **1) 特性拆解基线表（渐进明细后的最终版）**

| 特性ID | 特性名称 | 特性分类 | 来源 | 描述 |
| :--- | :--- | :--- | :--- | :--- |
| **SF-1** | **高性能AI训练数据访问** | 主流场景特性 | 初始拆解 | 为AI训练框架提供高性能、高并发的数据读取能力。 |
|  ├ SF-1.1 | 面向海量小文件的高IOPS元数据加速 | 主流场景特性 | 场景建模 | 针对文本、代码等小文件场景优化元数据性能，提升读取IOPS。 |
|  ├ SF-1.2 | 面向大文件的超高聚合带宽 | 主流场景特性 | 场景建模 | 针对图像、视频等大文件场景优化数据分片，提供高吞吐。 |
|  └ SF-1.3 | 混合负载智能数据布局与预取 | 体验特性 | 场景建模 | 自动感知作业I/O模式，智能调整数据缓存、预取和后端布局。 |
| **SF-2** | **AI基础设施亲和性** | 技术特性 (DFX) | 初始拆解 | 与主流AI计算框架和硬件（GPU）深度集成，降低延迟。 |
|  ├ SF-2.1 | 原生支持GPUDirect Storage技术 | 重要场景特性 | 场景建模 | 数据可从存储直通GPU显存，绕过CPU，实现微秒级延迟。 |
|  ├ SF-2.2 | 训练作业I/O性能瓶颈可视化诊断 | 体验特性 | 旅程设计 | 提供关联GPU利用率和存储I/O的监控视图，可视化瓶颈。 |
|  └ SF-2.3 | 基于GPU I/O等待的智能告警 | 体验特性 | 旅程设计 | 当GPU因I/O空等时间过长时，主动向用户发出告警。 |
| **SF-3** | **AI数据资产管理** | 重要场景特性 | 场景建模 | 提供面向AI的数据版本、血缘等管理能力，保障实验可复现性。 |
|  └ SF-3.1 | 统一命名空间下的数据版本快照 | 重要场景特性 | 场景建模 | 支持秒级创建PB级数据集的不可变快照，用于模型训练溯源。 |
| **SF-4** | **数据敏捷化与自动化** | 体验特性 | 旅程设计 | 简化AI数据准备和流转过程，提升数据就绪效率。 |
|  └ SF-4.1 | 多源数据一键引入与自动格式化 | 体验特性 | 旅程设计 | 支持从云端或本地数据源一键式、高速地将数据导入并优化格式。 |

#### **2) 主旅程Playbook**

**Playbook名称：AI科学家“分钟级”启动PB级多模态训练任务**

  * **价值主张**: 将AI模型训练的数据就绪时间从数天缩短至分钟级，并通过性能洞察确保GPU资源的高效利用，加速AI创新。
  * **目标用户**: AI科学家、数据工程师、AI平台工程师。
  * **成功标准**:
    1.  用户能在1小时内完成PB级数据集的逻辑就绪（创建快照）。
    2.  AI科学家修改不超过5行代码即可在训练脚本中引用新数据集。
    3.  训练任务启动后5分钟内，I/O性能洞察大盘能正确显示关联指标，且GPU平均利用率 \> 90%。
  * **旅程剧本 (Playbook Steps)**:
    | 步骤 | 阶段 | 核心活动 | 负责人 | 关键特性依赖 | 产出物 |
    | :--- | :--- | :--- | :--- | :--- | :--- |
    | 1 | 数据准备 | 使用存储系统提供的工具，从公有云OSS高速拉取1PB图文数据到存储集群。 | 数据工程师 | `SF-4.1` | 数据在存储中就位 |
    | 2 | 数据版本化 | 对清洗后的数据集，执行`create-snapshot`命令，秒级创建一个名为 `multimodal-v2.1` 的数据快照。 | 数据工程师 | `SF-3.1` | 不可变的数据快照 |
    | 3 | 训练脚本适配 | 在PyTorch训练脚本中，将数据集路径参数修改为 `/datasets/multimodal-v2.1`。 | AI科学家 | `SF-3.1` (统一命名空间) | 更新后的训练代码 |
    | 4 | 任务提交 | 像往常一样，通过`kubectl`或`kubeflow`将训练作业提交到GPU集群。 | AI科学家 | N/A | 运行中的训练作业 |
    | 5 | 性能验证 | 登录监控平台，打开“AI训练作业性能洞察”仪表盘，选择刚提交的作业。 | AI科学家 / 平台工程师 | `SF-2.2`, `SF-2.3` | 作业健康的确认报告 |
    | 6 | 结果分析 | 观察到GPU利用率持续稳定在92%，I/O等待低于5%，确认数据供给非瓶颈。 | AI科学家 / 平台工程师 | `SF-2.2` | 性能优化基线 |

#### **3) 需求描述及UI旅程设计项描述**


  * **特性ID**: `SF-2.2`
  * **特性名称**: 训练作业I/O性能瓶颈可视化诊断
  * **用户故事**: As an AI Platform Engineer, I want to view a dashboard that correlates a specific training job's GPU utilization with its real-time storage I/O metrics, so that I can immediately identify whether a performance issue is caused by a storage bottleneck.
  * **UI/UX设计核心**:
      * **信息聚合**: 将原本分散在计算监控系统（GPU利用率）和存储监控系统（I/O指标）的数据，基于“训练作业”这个统一的业务对象进行聚合展示。
      * **因果关联**: UI布局上，将GPU利用率和I/O等待的图表置于顶部，作为“结果”；将存储吞吐和IOPS的图表置于底部，作为“原因”，引导用户进行因果分析。
      * **智能诊断**: 提供一键式的诊断建议，将复杂的性能数据转化为人类可读的、可行动的洞察，这是从“监控”到“可观测性”再到“智能运维”的关键一步。